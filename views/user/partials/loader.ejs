<!-- views/partials/loader.ejs -->

<div id="global-loader" class="fixed inset-0 bg-white flex flex-col justify-center items-center z-[9999] transition-opacity duration-500">
  <!-- Brand -->
  <img src="/assets/images/mainlogotz.png" alt="Traveezy" class="h-20 w-auto mb-10" />

  <!-- Spinner -->
  <div class="spinner-ring" aria-hidden="true"></div>

  <!-- Microcopy -->
  <p class="text-gray-600 text-sm font-medium mt-8">Loading your next adventure...</p>

  <style>
    #global-loader {
      position: fixed; inset: 0; background: #fff;
      display: flex; justify-content: center; align-items: center; flex-direction: column;
      transition: opacity .5s ease;
    }
    #global-loader.hide { opacity: 0; pointer-events: none; }

    .spinner-ring {
      width: 48px; height: 48px;
      border-radius: 9999px;
      border: 4px solid #eef2f5;
      border-top-color: #35D6A7;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    @media (max-width: 640px) { .spinner-ring { width: 40px; height: 40px; } }
  </style>

  <script>
    function hideGlobalLoader() {
      const el = document.getElementById('global-loader');
      if (!el) return;
      el.classList.add('hide');
      setTimeout(() => { el.style.display = 'none'; }, 500);
    }
    // Spinner is recommended for short waits (<~10s) per UX guidance [web:29]
    window.addEventListener('load', () => setTimeout(hideGlobalLoader, 1500));
    setTimeout(hideGlobalLoader, 10000);
    window.hideGlobalLoader = hideGlobalLoader;
  </script>
</div>
